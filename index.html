<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Life Calendar - Your Life in Weeks</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link href="https://fonts.googleapis.com/css?family=Roboto+Mono|Roboto:300,400,500" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://public.codepenassets.com/css/reset-2.0.min.css">
  
  <style>
    /* Global Styles */
    * {
      box-sizing: border-box;
      cursor: url("https://raw.githubusercontent.com/amal-sajeev/weekstolive/refs/heads/main/cursor.png") 32 32, default;
    }
    
    body {
      margin: 0;
      padding: 0;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(120deg, #fdfdfd, #ffffff);
      color: #1a1a1a;
      overflow-x: hidden;
      transition: background 6s ease;
      height: 100vh;
      overflow: hidden;
    }
    
    /* Screen Transition Animations */
    .screen {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      opacity: 0;
      pointer-events: none;
      transform: translateY(20px);
      transition: opacity 0.6s ease, transform 0.6s ease;
      will-change: opacity, transform;
      overflow-y: auto;
    }

    .screen.active {
      opacity: 1;
      pointer-events: auto;
      transform: translateY(0);
    }
    
    .screen::before {
    content: "";
    position: absolute;
    inset: 0;
    background: rgba(255,255,255,0.4);
    opacity: 0;
    transition: opacity 0.4s ease;
    pointer-events: none;
  }

  .screen:not(.active)::before {
    opacity: 1;
  }

    /* Date Picker Screen Styles */
    .date-picker-screen {
      display: flex;
      flex-direction: column;
      justify-content: center;   /* keep centered */
      align-items: center;
      height: 100vh;             /* always full viewport height */
      width: 100vw;              /* full viewport width */
      padding: 5vh 2vw;          /* breathing room */
      box-sizing: border-box;
    }
    
    .date-picker-screen h1 {
      font-size: 2.5rem;
      font-weight: 300;
      margin-bottom: 1rem;
      text-align: center;
      color: #333;
      animation: fadeInDown 0.8s ease both;
    }
    
    .date-picker-screen .subtitle {
      font-size: 1.1rem;
      color: #666;
      margin-bottom: 2rem;
      text-align: center;
      animation: fadeIn 1s ease both 0.3s;
    }
    
    .center {
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      font: 16px 'Roboto', sans-serif;
      transform: scale(1.3);
      animation: zoomIn 0.6s ease both 0.6s;
      margin: 0.5rem 0;
    }
    
    .center .date {
      font-size: 30px;
      font-weight: 300;
      margin: 0.5rem 0;
      padding: 10px;
    }
    
    .center .date-picker {
      display: flex;
      padding: 42px;
      margin: 10px 0;
      overflow: hidden;
    }
    
    .center .day,
    .center .month,
    .center .year {
      position: relative;
      height: 52px;
      margin: 0px 15px;
      border-top: 1px solid #0522f3;
      border-bottom: 1px solid #0522f3;
      border-radius: 0;
    }
    
    /* Replace gray overlays with up/down buttons */
    .center .day .up-btn,
    .center .month .up-btn,
    .center .year .up-btn,
    .center .day .down-btn,
    .center .month .down-btn,
    .center .year .down-btn {
      position: absolute;
      left: 0;
      width: 100%;
      height: 50px;
      background: rgba(255, 255, 255, 0.75);
      border: none;
      padding-right: 0;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content:  flex-end;
      font-size: 18px;
      font-weight: bold;
      color: #0522f3;
      transition: all 0.2s ease;
      z-index: 20;
      backdrop-filter: blur(4px);
      pointer-events: auto;
    }
    
    .center .day .up-btn,
    .center .month .up-btn,
    .center .year .up-btn {
      top: -50px;
    }
    
    .center .day .down-btn,
    .center .month .down-btn,
    .center .year .down-btn {
      bottom: -50px;
    }
    
    .center .day .up-btn:hover,
    .center .month .up-btn:hover,
    .center .year .up-btn:hover,
    .center .day .down-btn:hover,
    .center .month .down-btn:hover,
    .center .year .down-btn:hover {
      background: rgba(255, 255, 255, 0.78);
      color: #0522f3;
      transform: scale(1.05);
      box-shadow: 0 2px 8px rgba(5, 34, 243, 0.15);
    }
    
    .center .day .up-btn:active,
    .center .month .up-btn:active,
    .center .year .up-btn:active,
    .center .day .down-btn:active,
    .center .month .down-btn:active,
    .center .year .down-btn:active {
      background:rgba(255, 255, 255, 0.78);
      transform: scale(0.95);
      box-shadow: 0 1px 4px rgba(5, 34, 243, 0.2);
    }
    
    .center .day li,
    .center .month li,
    .center .year li {
      display: flex;
      justify-content: center;
      align-items: center;
      width: 80px;
      height: 50px;
      -webkit-user-select: none;
         -moz-user-select: none;
          -ms-user-select: none;
              user-select: none;
      margin-left: -5px;
    }
    
    .continue-btn {
      width: 160px;
      height: 45px;
      border-radius: 25px;
      border: none;
      outline: none;
      color: white;
      background-color: #2466fb;
      box-shadow: 0 4px 20px rgba(36, 102, 251, 0.3);
      font-weight: 500;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.2s ease;
      margin-top: 2rem;
      animation: fadeInUp 0.8s ease both 1s;
      position: relative;
      overflow: hidden;
    }
    
    .continue-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 6px 25px rgba(36, 102, 251, 0.4);
    }
    
    .continue-btn::after {
      content: "";
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: rgba(255, 255, 255, 0.2);
      transform: skewX(-20deg);
      transition: left 0.5s ease;
    }
    
    .continue-btn:hover::after {
      left: 200%;
    }
    
    /* Life Calendar Screen Styles */
    .life-calendar-screen {
      padding: 20px;
      min-height: 100vh;
      background: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      overflow-y: auto;
    }
    
    .life-calendar-screen h1 {
      text-align: center;
      font-size: 28px;
      margin-bottom: 8px;
      margin-top: 60px;
      animation: fadeInDown 0.8s ease both;
    }
    
    .birth-info {
      text-align: center;
      margin-bottom: 20px;
      font-size: 16px;
      color: 666;
      animation: fadeIn 0.8s ease both 0.4s;
    }

    .week-info {
      text-align: center;
      margin-bottom: 20px;
      font-size: 26px;
      color: #666;
      font-weight: 500;
      animation: fadeIn 0.8s ease both 0.6s;
    }
    
    .back-btn {
      position: fixed;
      top: 20px;
      left: 20px;
      background: #2466fb;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 20px;
      cursor: pointer;
      font-size: 14px;
      z-index: 1000;
      transition: all 0.2s ease;
      overflow: hidden;
    }
    
    .back-btn:hover {
      background: #1e56e8;
      transform: scale(1.05);
    }
    
    .reflection {
      text-align: center;
      font-size: 12px;
      font-style: italic;
      color: #444;
      margin-bottom: 25px;
      opacity: 0;
      transform: translateY(15px);
      transition: opacity 1.2s ease, transform 1.2s ease;
      animation: floatText 6s ease-in-out infinite;
    }
    
    .reflection.show {
      opacity: 1;
      transform: translateY(0);
    }

    /* Life Calendar Specific Styles */
    :root{
      --cell-size: 12px;
      --gap: 2px;
      --cols: 52;
      --rows: 90;
      --y-axis-width: 24px;
      --accent: #2466fb;
      --future: #f0f0f0;
      --tooltip-bg: #fff;
    }

    .wrap {
      display: grid;
      grid-template-columns: var(--y-axis-width) 1fr;
      grid-template-rows: auto 1fr;
      column-gap: 4px;
      align-items: start;
      justify-content: center;
      margin: 0 auto;
      opacity: 0;
      animation: fadeIn 1s ease forwards 0.8s;
      max-width: 100%;
      overflow-x: auto;
    }
    .x-axis {
      grid-column: 2;
      grid-row: 1;
      display: grid;
      grid-template-columns: repeat(var(--cols), var(--cell-size));
      column-gap: var(--gap);
      width: calc( (var(--cols) * var(--cell-size)) + ((var(--cols)-1) * var(--gap)) );
      font-size: 11px;
      color: #333;
      margin-bottom: 8px;
    }
    
    .x-axis .tick {
      height: 18px;
      display:flex;
      align-items:center;
      justify-content:center;
    }

    .y-axis {
      grid-column: 1;
      grid-row: 2;
      display: grid;
      grid-template-rows: repeat(var(--rows), var(--cell-size));
      row-gap: var(--gap);
      height: calc( (var(--rows) * var(--cell-size)) + ((var(--rows)-1) * var(--gap)) );
      align-content: start;
    }
    
    .y-axis .label {
      display:flex;
      align-items:center;
      justify-content:flex-end;
      padding-right:3px;
      font-size:12px;
      color:#3b3b3b;
    }

    .grid-container {
      grid-column: 2;
      grid-row: 2;
      display: grid;
      grid-template-columns: repeat(var(--cols), var(--cell-size));
      grid-template-rows: repeat(var(--rows), var(--cell-size));
      column-gap: var(--gap);
      row-gap: var(--gap);
      width: calc( (var(--cols) * var(--cell-size)) + ((var(--cols)-1) * var(--gap)) );
      background: transparent;
      padding-bottom: 6px;
    }

    .cell {
      width: var(--cell-size);
      height: var(--cell-size);
      border-radius: 2px;
      border: 1px solid #d5d5d5;
      background: var(--future);
      transition: background 160ms ease, transform 120ms ease;
      box-sizing: border-box;
    }
    
    .cell:hover{ 
      transform: translateY(-2px); 
      box-shadow: 0 6px 10px rgba(0,0,0,0.08); 
    }

    /* Life stages from life_calendar_stages.html */
    .cell.early { background:#0072ce; }
    .cell.elementary { background:#1aa349; }
    .cell.middle { background:#78c000; }
    .cell.high { background:#ffdb00; }
    .cell.college { background:#ff8c1a; }
    .cell.grad { background:#d64550; }
    .cell.career { background:#e85d5d; }
    .cell.retirement { background:#836fa9; }
    .cell.milestone { 
      outline: 2px solid black; 
      outline-offset: -1px; 
      box-shadow: 0 0 6px rgba(0,0,0,0.3); 
    }
    
    .cell.current {
      outline: 2px solid gold;
      outline-offset: -2px;
      box-shadow: 0 0 12px rgba(255,200,60,0.45);
      animation: pulse 2s infinite;
    }

    .tooltip {
      position: fixed;
      pointer-events: none;
      background: var(--tooltip-bg);
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 8px 10px;
      font-size: 13px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.10);
      opacity: 0;
      transform: translateY(-6px) scale(0.95);
      transition: opacity 160ms ease, transform 160ms ease;
      z-index: 9999;
      color:#111;
    }
    
    .tooltip.show { 
      opacity: 1; 
      transform: translateY(0) scale(1);
    }

    .legend {
      display:flex;
      flex-wrap:wrap;
      justify-content:center;
      gap:12px;
      margin-top: 12px;
      font-size: 13px;
      color:#222;
      animation: fadeIn 0.8s ease both 1s;
    }
    
    .legend .item { 
      display:flex; 
      gap:6px; 
      align-items:center; 
    }
    
    .legend .sw { 
      width:16px; 
      height:16px; 
      border-radius:3px; 
      border:1px solid #cfcfcf; 
    }
    
    /* Animation Keyframes */
    @keyframes fadeIn { 
      from { opacity:0; } 
      to { opacity:1; } 
    }
    
    @keyframes fadeInUp { 
      from { opacity:0; transform:translateY(20px); } 
      to { opacity:1; transform:translateY(0); } 
    }
    
    @keyframes fadeInDown { 
      from { opacity:0; transform:translateY(-20px); } 
      to { opacity:1; transform:translateY(0); } 
    }
    
    @keyframes zoomIn { 
      from { opacity:0; transform:scale(0.8); } 
      to { opacity:1; transform:scale(1.3); } 
    }

    @keyframes floatText {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-8px); }
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); box-shadow: 0 0 12px rgba(255,200,60,0.45); }
      50% { transform: scale(1.08); box-shadow: 0 0 20px rgba(255,200,60,0.6); }
    }

    @keyframes bgShift {
      0% { background: #f8f9fa; }
      100% { background: #eef2f7; }
    }

    /* Scale down grid on smaller screens */
    @media (max-width: 768px) {
      :root {
        --cell-size: 5px;
        --gap: 1px;
        --y-axis-width: 40px;
      }
      .x-axis .tick {
        font-size: 8px;
      }
      .y-axis .label {
        font-size: 9px;
      }
    }
    @media (max-height: 500px) {
      .date-picker-screen h1 {
        font-size: 1.5rem;
        margin-bottom: 0.5rem;
      }
      
      .date-picker-screen .subtitle {
        font-size: 0.9rem;
        margin-bottom: 0.5rem;
      }
      
      .center {
        transform: scale(0.9);
      }
      
      .center .date {
        font-size: 20px;
      }
      
      .center .date-picker {
        padding: 5px 10px;
      }
      
      .center .day,
      .center .month,
      .center .year {
        height: 40px;
        margin: 0 8px;
      }
      
      .center .day li,
      .center .month li,
      .center .year li {
        height: 40px;
        width: 70px;
      }
      
      .continue-btn {
        height: 36px;
        font-size: 14px;
        width: 140px;
      }

      .week-info{
        font-size: 14px;
      }
    }
    
  </style>
</head>
<body>
  <!-- Date Picker Screen -->
  <div class="screen date-picker-screen active" id="datePickerScreen">
    <h1>Your Life in Weeks</h1>
    <p class="subtitle">Select your birth date to visualize your life journey</p>
    
    <div class="center" id="datePickerApp">
      <!-- React app will render here -->
    </div>
    
    <button class="continue-btn" id="continueBtn">View My Life</button>
  </div>

  <!-- Life Calendar Screen -->
  <div class="screen life-calendar-screen" id="lifeCalendarScreen">
    <button class="back-btn" id="backBtn">← Change Date</button>
    
    <h1>Your Life in Weeks</h1>
   
    <div class="birth-info" id="weekInfo"></div>
    <div class="reflection" id="lifeReflection"></div>

    <div class="wrap">
      <div class="x-axis" id="xAxis"></div>
      <div class="y-axis" id="yAxis"></div>
      <div class="grid-container" id="lifeGrid"></div>
    </div>

    <!-- Updated Legend from life_calendar_stages.html -->
    <div class="legend">
      <div class="item"><div class="sw" style="background:#0072ce"></div><div>Early Years</div></div>
      <div class="item"><div class="sw" style="background:#1aa349"></div><div>Elementary</div></div>
      <div class="item"><div class="sw" style="background:#78c000"></div><div>Middle School</div></div>
      <div class="item"><div class="sw" style="background:#ffdb00"></div><div>High School</div></div>
      <div class="item"><div class="sw" style="background:#ff8c1a"></div><div>College</div></div>
      <div class="item"><div class="sw" style="background:#d64550"></div><div>Graduate School</div></div>
      <div class="item"><div class="sw" style="background:#e85d5d"></div><div>Career</div></div>
      <div class="item"><div class="sw" style="background:#836fa9"></div><div>Retirement</div></div>
    </div>

    
  </div>

  <div id="tooltip" class="tooltip"></div>

  <script src='https://cdnjs.cloudflare.com/ajax/libs/react/16.4.0/umd/react.production.min.js'></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/react-dom/16.4.0/umd/react-dom.production.min.js'></script>
  
  <script>
    // Global variables to store selected date
    let selectedDate = new Date();
    
    // Original React Date Picker Component from input.html
    function _defineProperty(obj, key, value) {
      if (key in obj) {
        Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });
      } else {
        obj[key] = value;
      }
      return obj;
    }

    const { Component, Fragment } = React;

    const MONTHS = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'July', 'Aug', 'Sept', 'Oct', 'Nov', 'Dec'];
    const YEARS = new Array(201).fill(1900).map((value, index) => value + index);

    class CustomWheel extends Component {
      constructor({ selected }) {
        super();
        
        _defineProperty(this, "onMouseDown", event => {
          this.previousY = event.touches ? event.touches[0].clientY : event.clientY;
          this.dragging = true;

          document.addEventListener('mousemove', this.onMouseMove);
          document.addEventListener('mouseup', this.onMouseUp);
          document.addEventListener('touchmove', this.onMouseMove);
          document.addEventListener('touchend', this.onMouseUp);
        });
        
        _defineProperty(this, "onMouseMove", event => {
          let clientY = event.touches ? event.touches[0].clientY : event.clientY;
          this.offset = clientY - this.previousY;
          let maxPosition = -this.props.data.length * 50;
          let position = this.state.position + this.offset;
          this.setState({ position: Math.max(maxPosition, Math.min(50, position)) });
          this.previousY = event.touches ? event.touches[0].clientY : event.clientY;
        });
        
        _defineProperty(this, "onMouseUp", () => {
          // calculate closeset snap
          let maxPosition = -(this.props.data.length - 1) * 50;
          let rounderPosition = Math.round((this.state.position + this.offset * 5) / 50) * 50;
          let finalPosition = Math.max(maxPosition, Math.min(0, rounderPosition));

          this.dragging = false;
          this.setState({ position: finalPosition });

          document.removeEventListener('mousemove', this.onMouseMove);
          document.removeEventListener('mouseup', this.onMouseUp);
          document.removeEventListener('touchmove', this.onMouseMove);
          document.removeEventListener('touchend', this.onMouseUp);

          this.props.onDateChange(this.props.type, -finalPosition / 50);
        });
        
        _defineProperty(this, "onWheel", event => {
          event.preventDefault();
          // Determine scroll direction (positive = scroll down, negative = scroll up)
          let delta = event.deltaY > 0 ? -50 : 50;
          let maxPosition = -(this.props.data.length - 1) * 50;
          let newPosition = this.state.position + delta;
          let finalPosition = Math.max(maxPosition, Math.min(0, newPosition));
          this.setState({ position: finalPosition });
          this.props.onDateChange(this.props.type, -finalPosition / 50);
        });

        // Button click handlers
        _defineProperty(this, "onUpClick", () => {
          let maxPosition = -(this.props.data.length - 1) * 50;
          let newPosition = this.state.position + 50;
          let finalPosition = Math.max(maxPosition, Math.min(0, newPosition));
          this.setState({ position: finalPosition });
          this.props.onDateChange(this.props.type, -finalPosition / 50);
        });

        _defineProperty(this, "onDownClick", () => {
          let maxPosition = -(this.props.data.length - 1) * 50;
          let newPosition = this.state.position - 50;
          let finalPosition = Math.max(maxPosition, Math.min(0, newPosition));
          this.setState({ position: finalPosition });
          this.props.onDateChange(this.props.type, -finalPosition / 50);
        });

        this.state = { position: selected ? -(selected - 1) * 50 : 0 };
        this.offset = 0;
        this.dragging = false;
      }

      componentDidUpdate() {
        let selectedPosition = -(this.props.selected - 1) * 50;
        if (!this.dragging && this.state.position !== selectedPosition) {
          this.setState({ position: selectedPosition });
        }
      }

      render() {
        let inlineStyle = {
          willChange: 'transform',
          transition: `transform ${Math.abs(this.offset) / 100 + 0.1}s`,
          transform: `translateY(${this.state.position}px)`
        };

        return React.createElement("div", { 
          className: "dragdealer year", 
          onMouseDown: this.onMouseDown, 
          onTouchStart: this.onMouseDown,
          onWheel: this.onWheel 
        }, 
        React.createElement("button", { 
          className: "up-btn", 
          onClick: this.onUpClick,
          onMouseDown: (e) => e.stopPropagation()
        }, "▲"),
        React.createElement("ul", { className: "handle", style: inlineStyle },
        this.props.data.map(item => React.createElement("li", { key: item }, item))),
        React.createElement("button", { 
          className: "down-btn", 
          onClick: this.onDownClick,
          onMouseDown: (e) => e.stopPropagation()
        }, "▼"));
      }
    }

    class DatePicker extends Component {
      constructor(...args) {
        super(...args);
        
        _defineProperty(this, "dateChanged", (type, changedData) => {
          let newDate;

          if (type === 'day') {
            newDate = new Date(this.props.date.getFullYear(), this.props.date.getMonth(), changedData + 1);
          } else if (type === 'month') {
            let maxDayInSelectedMonth = new Date(this.props.date.getFullYear(), changedData + 1, 0).getDate();
            let day = Math.min(this.props.date.getDate(), maxDayInSelectedMonth);
            newDate = new Date(this.props.date.getFullYear(), changedData, day);
          } else if (type === 'year') {
            let maxDayInSelectedMonth = new Date(1900 + changedData, this.props.date.getMonth() + 1, 0).getDate();
            let day = Math.min(this.props.date.getDate(), maxDayInSelectedMonth);
            newDate = new Date(1900 + changedData, this.props.date.getMonth(), day);
          }

          this.props.onDateChange(newDate);
        });
      }

      render() {
        this.days = new Array(new Date(this.props.date.getFullYear(), this.props.date.getMonth() + 1, 0).getDate())
          .fill(1)
          .map((value, index) => value + index);

        this.months = MONTHS;
        this.years = YEARS;

        return React.createElement("div", { className: "date-picker" },
          React.createElement(CustomWheel, { type: "day", data: this.days, selected: this.props.date.getDate(), onDateChange: this.dateChanged }),
          React.createElement(CustomWheel, { type: "month", data: this.months, selected: this.props.date.getMonth() + 1, onDateChange: this.dateChanged }),
          React.createElement(CustomWheel, { type: "year", data: this.years, selected: this.props.date.getYear() + 1, onDateChange: this.dateChanged })
        );
      }
    }

    class App extends Component {
      constructor(...args) {
        super(...args);
        
        _defineProperty(this, "state", { date: new Date() });
        
        _defineProperty(this, "dateChanged", newDate => {
          this.setState({ date: newDate });
          selectedDate = newDate; // Update global selected date
        });
      }

      render() {
        return React.createElement(Fragment, null,
          React.createElement("div", { className: "date" }, 
            this.state.date.getDate(), " ", 
            MONTHS[this.state.date.getMonth()], " ", 
            this.state.date.getFullYear()
          ),
          React.createElement(DatePicker, { date: this.state.date, onDateChange: this.dateChanged })
        );
      }
    }

    // Life stages function from life_calendar_stages.html
    function getLifeStage(age) {
      if (age < 5) return "early";
      if (age < 11) return "elementary";
      if (age < 14) return "middle";
      if (age < 18) return "high";
      if (age < 22) return "college";
      if (age < 25) return "grad";
      if (age < 65) return "career";
      return "retirement";
    }

    // Milestone markers function from life_calendar_stages.html
    function markMilestones(cells) {
      const milestones = [
        { age: 16, week: 0, label: "Driving age" },
        { age: 18, week: 0, label: "Voting age" },
        { age: 21, week: 0, label: "Legal drinking age" },
        { age: 26, week: 0, label: "First child (avg)" },
        { age: 30, week: 0, label: "Marriage (avg)" },
        { age: 65, week: 0, label: "Retirement" },
        { age: 79, week: 0, label: "Life expectancy" }
      ];
      milestones.forEach(m => {
        const idx = m.age * COLS + m.week;
        if (idx < cells.length) {
          cells[idx].classList.add("milestone");
          cells[idx].dataset.milestone = m.label;
        }
      });
    }

    function showReflection() {
      const lines = [
        // Time awareness & mortality
        "You have fewer summers left than you think. How will you spend the next one?",
        "Every week is a brick in the wall of your life — are you building a fortress or a prison?",
        "What if you only had 1,000 weeks left — would you live today differently?",
        "Your calendar is finite. Your attention even more so.",
        "Seneca said: 'It is not that we have a short time to live, but that we waste a lot of it.'",
        "Each square is a chance — will you trade it for scrolling or for living?",
        "Time is the one currency you can't earn back. How are you spending it?",
        "This grid is your story in weeks. Which chapter are you in?",
        "Imagine your life as a novel — are you proud of this chapter?",
        "The future is a blank grid. What do you want to color in?",
        
        // Death as motivation
        "Memento mori: Remember you must die. Not to frighten, but to awaken.",
        "Every sunset brings you one day closer to your last. Are you watching?",
        "Death is not the opposite of life, but the backdrop that gives it meaning.",
        "You will die. What does that change about today?",
        "The cemetery is full of people who thought they had more time.",
        "What would you do if you knew you had exactly one year left?",
        "Your tombstone won't list your Netflix hours. What will it say?",
        "If this were your last week, would you spend it the same way?",
        "Death makes philosophers of us all — what's your philosophy?",
        "The clock is ticking for everyone. Are you listening?",
        
        // Present moment awareness
        "This moment will never come again. How present are you?",
        "Yesterday is history, tomorrow is mystery, today is a gift.",
        "The present is the only time you can actually live in.",
        "Are you living your days or just surviving them?",
        "How many sunrises have you missed while planning tomorrow?",
        "The ordinary moments are the ones you'll miss most.",
        "Today someone is living their last normal day. Is it you?",
        "The present moment is the only moment available to us.",
        "Life happens while you're making other plans.",
        "This breath, this heartbeat, this second — it's all you truly have.",
        
        // Regret and missed opportunities
        "The biggest risk is not taking any risk at all.",
        "What dreams are dying in your 'someday' file?",
        "Regret weighs more than failure ever will.",
        "The graveyard of dreams is paved with 'what ifs' and 'if onlys.'",
        "What would you attempt if you knew you couldn't fail?",
        "Fear of failure is just fear of being fully alive.",
        "The person you could become is waiting for you to begin.",
        "Your comfort zone is a beautiful place, but nothing grows there.",
        "What opportunities are you trading for security?",
        "The word 'someday' is where dreams go to die.",
        
        // Purpose and meaning
        "What legacy will outlive your last breath?",
        "If your life had a mission statement, what would it be?",
        "Are you living a life that matters to you?",
        "What problem were you born to solve?",
        "Your life is your message to the world. What are you saying?",
        "What would you do if money were no object and failure impossible?",
        "The meaning of life is to give life meaning.",
        "What story are you telling with the days you've been given?",
        "Purpose isn't found, it's forged in the fire of living.",
        "What impact will you make that echoes beyond your years?",
        
        // Relationships and connection
        "Who would miss you if you were gone tomorrow?",
        "The richest person is not the one who has the most, but needs the least.",
        "Love is the only thing that multiplies when you give it away.",
        "When did you last tell someone they mattered to you?",
        "Relationships are the only treasure you can take to the grave.",
        "Are you building bridges or walls with your words?",
        "The quality of your relationships determines the quality of your life.",
        "Who are you becoming in the eyes of those you love?",
        "Time spent with loved ones is the only time truly lived.",
        "Your presence is the greatest present you can give.",
        
        // Growth and change
        "If you're not growing, you're dying.",
        "The person you were yesterday no longer exists.",
        "What version of yourself are you becoming?",
        "Change is the price of relevance.",
        "Your potential is infinite, but your time is not.",
        "Every expert was once a beginner who refused to quit.",
        "The best time to plant a tree was 20 years ago. The second best time is now.",
        "You are not stuck with the person you were yesterday.",
        "Growth requires the courage to be uncomfortable.",
        "What new chapter will you write starting today?",
        
        // Priorities and values
        "What truly matters when everything else is stripped away?",
        "Your priorities are revealed by your calendar and bank statement.",
        "Are you climbing the ladder against the right wall?",
        "What are you optimizing your life for?",
        "The things you value most should occupy most of your time.",
        "What would you do if you could only do one thing for the rest of your life?",
        "Your values are your GPS — are you following them?",
        "Success without fulfillment is the ultimate failure.",
        "What price are you willing to pay for what you want?",
        "Are your actions aligned with your values?",
        
        // Action and momentum
        "The perfect moment doesn't exist — this one will have to do.",
        "Dreams without action are just wishes.",
        "The journey of a thousand miles begins with a single step.",
        "What small action could you take right now?",
        "Motion creates emotion, action creates attraction.",
        "You don't have to be great to get started, but you have to get started to be great.",
        "The best way to predict the future is to create it.",
        "Procrastination is the thief of time.",
        "Every moment of hesitation is a moment of life passing by.",
        "Start where you are, use what you have, do what you can.",
        
        // Wisdom and reflection
        "The unexamined life is not worth living.",
        "Wisdom comes from experience, and experience comes from poor judgment.",
        "What would your 80-year-old self advise your current self?",
        "The fool thinks he knows everything; the wise man knows he knows nothing.",
        "Experience is what you get when you don't get what you wanted.",
        "What lessons is life trying to teach you right now?",
        "The quality of your questions determines the quality of your life.",
        "Reflection turns experience into wisdom.",
        "What patterns do you see when you look back at your choices?",
        "The teacher appears when the student is ready.",
        
        // Gratitude and appreciation
        "What if you woke up today with only what you thanked God for yesterday?",
        "Gratitude turns what we have into enough.",
        "The happiest people don't have the best of everything; they make the best of everything.",
        "What ordinary miracle are you taking for granted?",
        "Appreciation is the highest form of prayer.",
        "Count your blessings, not your problems.",
        "What abundance already exists in your life?",
        "The secret to having enough is wanting what you have.",
        "Every day above ground is a good day.",
        "What simple pleasure brought you joy today?",
        
        // Courage and boldness
        "Courage isn't the absence of fear; it's action in spite of fear.",
        "What would you do if you knew you were brave enough?",
        "The cave you fear to enter holds the treasure you seek.",
        "Life shrinks or expands in proportion to one's courage.",
        "What's the worst that could happen if you tried?",
        "Fortune favors the bold.",
        "The only way out is through.",
        "What would you attempt if you had unlimited confidence?",
        "Bravery is not the absence of fear, but mastery of it.",
        "What mountain are you avoiding that you need to climb?",
        
        // Legacy and impact
        "What mark will you leave on the world?",
        "How will people remember you when you're gone?",
        "What difference will your existence have made?",
        "The question isn't how long you live, but how you live long.",
        "What seeds are you planting for future generations?",
        "Your life is a gift — how are you unwrapping it?",
        "What problem will you solve that makes the world better?",
        "The best time to impact someone's life is now.",
        "What story do you want your life to tell?",
        "How will you live on in the hearts and minds of others?"
      ];

      const reflection = document.getElementById('lifeReflection');
      reflection.textContent = lines[Math.floor(Math.random() * lines.length)];

      // Trigger fade-in
      setTimeout(() => reflection.classList.add('show'), 100);
    }

    // Life Calendar Code
    const COLS = 52;
    const ROWS = 90;

    function buildXAxis() {
      const xAxis = document.getElementById('xAxis');
      xAxis.innerHTML = '';
      for(let c = 1; c <= COLS; c++) {
        const d = document.createElement('div');
        d.className = 'tick';
        if (c === 1 || c === COLS || c % 5 === 0) d.textContent = c;
        xAxis.appendChild(d);
      }
    }

    function buildYAxis() {
      const yAxis = document.getElementById('yAxis');
      yAxis.innerHTML = '';
      for(let r = 0; r < ROWS; r++) {
        const cell = document.createElement('div');
        cell.className = 'label';
        if (r % 5 === 0) cell.textContent = r;
        else cell.textContent = '';
        yAxis.appendChild(cell);
      }
    }

    function buildGrid() {
      const lifeGrid = document.getElementById('lifeGrid');
      lifeGrid.innerHTML = '';

      for (let age = 0; age < ROWS; age++) {
        for (let week = 0; week < COLS; week++) {
          const idx = age * COLS + week;
          const cell = document.createElement('div');
          cell.className = 'cell';
          cell.dataset.age = age;
          cell.dataset.week = week + 1;
          cell.dataset.index = idx + 1;
          lifeGrid.appendChild(cell);
        }
      }

      const tooltip = document.getElementById('tooltip');

      // Delegated events
      lifeGrid.addEventListener('mouseover', (e) => {
        const cell = e.target.closest('.cell');
        if (!cell) return;

        let age = cell.dataset.age;
        let week = cell.dataset.week;
        let idx = cell.dataset.index;

        let info = `<strong>Age:</strong> ${age} <span style="margin:0 6px">•</span> <strong>Week:</strong> ${week}<br><small>Absolute week # ${idx}</small>`;
        if (cell.dataset.milestone) {
          info += `<br><span style="color:#d64550; font-weight:bold;">★ ${cell.dataset.milestone}</span>`;
        }
        tooltip.innerHTML = info;
        tooltip.classList.add('show');
      });

      lifeGrid.addEventListener('mousemove', (e) => {
        if (!e.target.closest('.cell')) return;
        positionTooltip(e);
      });

      lifeGrid.addEventListener('mouseout', (e) => {
        if (!e.target.closest('.cell')) return;
        tooltip.classList.remove('show');
      });
    }

    function positionTooltip(e) {
      const tooltip = document.getElementById('tooltip');
      const pad = 12;
      const tooltipWidth = 200;
      const tooltipHeight = 60;
      
      // Get viewport dimensions
      const viewportWidth = window.innerWidth;
      const viewportHeight = window.innerHeight;
      
      // Calculate initial position (bottom-right by default)
      let x = e.clientX + pad;
      let y = e.clientY + pad;
      
      // Check if tooltip would go off the right edge
      if (x + tooltipWidth > viewportWidth - 10) {
        x = e.clientX - tooltipWidth - pad; // Position on the left
      }
      
      // Check if tooltip would go off the bottom edge
      if (y + tooltipHeight > viewportHeight - 10) {
        y = e.clientY - tooltipHeight - pad; // Position above cursor
      }
      
      // Additional check: if cursor is near the top-left corner
      // and tooltip would go off both edges, use special positioning
      if (e.clientX < tooltipWidth + 20 && e.clientY < tooltipHeight + 20) {
        x = e.clientX + pad;
        y = e.clientY + pad;
      }
      
      tooltip.style.left = x + 'px';
      tooltip.style.top = y + 'px';
    }

    function markLivedWeeks(birthDate) {
      const cells = document.getElementById('lifeGrid').children;

      if (!birthDate || isNaN(birthDate)) return;

      const now = new Date();
      const diffMs = now - birthDate;
      const weeksLived = Math.floor(diffMs / (1000 * 60 * 60 * 24 * 7));

      // First clear only previously applied classes (not rebuilding DOM)
      for (let i = 0; i < cells.length; i++) {
        cells[i].className = 'cell';
        delete cells[i].dataset.milestone;
      }

      // Color lived weeks based on life stage
      for (let i = 0; i < weeksLived && i < cells.length; i++) {
        const age = Math.floor(i / COLS);
        const stage = getLifeStage(age);
        cells[i].classList.add(stage);
      }

      // Mark the current week
      const curIndex = Math.max(0, Math.min(cells.length - 1, weeksLived - 1));
      if (curIndex >= 0) {
        cells[curIndex].classList.add('current');
      }

      // Add milestone markers (only affects specific cells)
      markMilestones(cells);
      
      // Return weeks lived for display
      return weeksLived;
    }

    function showLifeCalendar() {
      // Hide date picker screen with animation
      document.getElementById('datePickerScreen').classList.remove('active');
      
      // Show life calendar screen with animation after a small delay
      setTimeout(() => {
        document.getElementById('lifeCalendarScreen').classList.add('active');
        
        // Update birth info
        // const birthInfo = document.getElementById('birthInfo');
        // birthInfo.textContent = `Born on ${selectedDate.toLocaleDateString('en-US', { 
        //   year: 'numeric', 
        //   month: 'long', 
        //   day: 'numeric' 
        // })}`;
        
        // Build and render life calendar
        buildXAxis();
        buildYAxis();
        buildGrid();
        markLivedWeeks(selectedDate);
        const weeksLived = markLivedWeeks(selectedDate);
        
        // Update week info
        const remainingWeeks = (COLS * ROWS)-weeksLived; // 52 weeks * 90 years = 4680 weeks
        const weekInfo = document.getElementById('weekInfo');
        weekInfo.textContent = `This is week ${weeksLived} of your life, with an estimated ${remainingWeeks.toLocaleString()} weeks remaining.`;

        showReflection();
      }, 100);
    }

    function showDatePicker() {
      // Hide life calendar screen with animation
      document.getElementById('lifeCalendarScreen').classList.remove('active');
      
      // Show date picker screen with animation after a small delay
      setTimeout(() => {
        document.getElementById('datePickerScreen').classList.add('active');
      }, 100);
    }

    // Initialize the React date picker
    ReactDOM.render(React.createElement(App, null), document.getElementById('datePickerApp'));

    // Event listeners
    document.getElementById('continueBtn').addEventListener('click', showLifeCalendar);
    document.getElementById('backBtn').addEventListener('click', showDatePicker);

    // Adjust date picker screen on resize
    window.addEventListener('resize', function() {
      const datePickerScreen = document.getElementById('datePickerScreen');
      if (datePickerScreen.classList.contains('active')) {
        // Force reflow to ensure proper rendering
        datePickerScreen.style.display = 'none';
        datePickerScreen.offsetHeight; // Trigger reflow
        datePickerScreen.style.display = 'flex';
      }
    });
  </script>
</body>
</html>